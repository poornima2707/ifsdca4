{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\OneDrive\\\\Desktop\\\\IFSD_CA44\\\\Library-Central-main\\\\frontend\\\\src\\\\components\\\\UserDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { AppContext } from \"../context/AppContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { Container, Typography, Button, Card, CardContent, CardActions, Grid } from \"@mui/material\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserDashboard = () => {\n  _s();\n  const {\n    token\n  } = useContext(AppContext);\n  const [issuedBooks, setIssuedBooks] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchIssuedBooks = async () => {\n      try {\n        const res = await axios.get(\"http://localhost:5000/api/user/issued-books\", {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setIssuedBooks(res.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    fetchIssuedBooks();\n  }, [token]);\n  const handleReturnEbook = async ebookId => {\n    try {\n      await axios.post(`http://localhost:5000/api/user/ebooks/${ebookId}/return`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setIssuedBooks(prevIssuedBooks => prevIssuedBooks.filter(book => book._id !== ebookId));\n      toast.success(\"Ebook returned successfully\");\n    } catch (err) {\n      console.error(err);\n      toast.error(\"Error returning Ebook\");\n    }\n  };\n  const handleViewEbook = ebookId => {\n    navigate(`/ebook/${ebookId}`);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    sx: {\n      padding: 5\n    },\n    children: issuedBooks.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      color: \"textSecondary\",\n      children: \"No books issued to view\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      children: issuedBooks.map((book, index) => /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        sm: 6,\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            borderRadius: 2,\n            boxShadow: 3,\n            padding: 1.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              component: \"div\",\n              sx: {\n                marginBottom: 1\n              },\n              children: book.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                marginBottom: 1\n              },\n              children: [\"Author: \", book.authors.join(\", \")]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                marginBottom: 1\n              },\n              children: [\"Section: \", book.section]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                marginBottom: 1\n              },\n              children: [\"Issued Date: \", new Date(book.dateIssued).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              sx: {\n                marginBottom: 1\n              },\n              children: [\"Return Date: \", new Date(book.returnDate).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => handleViewEbook(book._id),\n              variant: \"contained\",\n              color: \"primary\",\n              children: \"Open Ebook\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => handleReturnEbook(book._id),\n              variant: \"contained\",\n              color: \"secondary\",\n              sx: {\n                mr: 1\n              },\n              children: \"Return Book\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(UserDashboard, \"9o65hcdQsMnjvSLfkr/ui2NauSs=\", false, function () {\n  return [useNavigate];\n});\n_c = UserDashboard;\nexport default UserDashboard;\nvar _c;\n$RefreshReg$(_c, \"UserDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AppContext","useNavigate","axios","Container","Typography","Button","Card","CardContent","CardActions","Grid","toast","jsxDEV","_jsxDEV","UserDashboard","_s","token","issuedBooks","setIssuedBooks","navigate","fetchIssuedBooks","res","get","headers","Authorization","data","err","console","error","handleReturnEbook","ebookId","post","prevIssuedBooks","filter","book","_id","success","handleViewEbook","sx","padding","children","length","variant","color","fileName","_jsxFileName","lineNumber","columnNumber","container","spacing","map","index","item","xs","sm","md","borderRadius","boxShadow","component","marginBottom","name","authors","join","section","Date","dateIssued","toLocaleDateString","returnDate","onClick","mr","_c","$RefreshReg$"],"sources":["C:/Users/DELL/OneDrive/Desktop/IFSD_CA44/Library-Central-main/frontend/src/components/UserDashboard.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { AppContext } from \"../context/AppContext\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport {\n  Container,\n  Typography,\n  Button,\n  Card,\n  CardContent,\n  CardActions,\n  Grid,\n} from \"@mui/material\";\nimport { toast } from \"react-toastify\";\n\nconst UserDashboard = () => {\n  const { token } = useContext(AppContext);\n  const [issuedBooks, setIssuedBooks] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchIssuedBooks = async () => {\n      try {\n        const res = await axios.get(\n          \"http://localhost:5000/api/user/issued-books\",\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n        setIssuedBooks(res.data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n\n    fetchIssuedBooks();\n  }, [token]);\n\n  const handleReturnEbook = async (ebookId) => {\n    try {\n      await axios.post(\n        `http://localhost:5000/api/user/ebooks/${ebookId}/return`,\n        {},\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setIssuedBooks((prevIssuedBooks) =>\n        prevIssuedBooks.filter((book) => book._id !== ebookId)\n      );\n      toast.success(\"Ebook returned successfully\");\n    } catch (err) {\n      console.error(err);\n      toast.error(\"Error returning Ebook\");\n    }\n  };\n\n  const handleViewEbook = (ebookId) => {\n    navigate(`/ebook/${ebookId}`);\n  };\n\n  return (\n    <Container sx={{ padding: 5 }}>\n      {issuedBooks.length === 0 ? (\n        <Typography variant=\"h6\" color=\"textSecondary\">\n          No books issued to view\n        </Typography>\n      ) : (\n        <Grid container spacing={2}>\n          {issuedBooks.map((book, index) => (\n            <Grid item xs={12} sm={6} md={6} key={index}>\n              <Card\n                sx={{\n                  borderRadius: 2,\n                  boxShadow: 3,\n                  padding: 1.5,\n                }}\n              >\n                <CardContent>\n                  <Typography variant=\"h6\" component=\"div\" sx={{ marginBottom: 1 }}>\n                    {book.name}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\" sx={{ marginBottom: 1 }}>\n                    Author: {book.authors.join(\", \")}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\" sx={{ marginBottom: 1 }}>\n                    Section: {book.section}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\" sx={{ marginBottom: 1 }}>\n                    Issued Date: {new Date(book.dateIssued).toLocaleDateString()}\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"textSecondary\" sx={{ marginBottom: 1 }}>\n                    Return Date: {new Date(book.returnDate).toLocaleDateString()}\n                  </Typography>\n                </CardContent>\n                <CardActions>\n                  <Button\n                    onClick={() => handleViewEbook(book._id)}\n                    variant=\"contained\"\n                    color=\"primary\"\n                  >\n                    Open Ebook\n                  </Button>\n                  <Button\n                    onClick={() => handleReturnEbook(book._id)}\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    sx={{ mr: 1 }}\n                  >\n                    Return Book\n                  </Button>\n                </CardActions>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n    </Container>\n  );\n};\n\nexport default UserDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}